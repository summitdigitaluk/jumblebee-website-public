"use strict";(()=>{var p=(e,t=!1,o)=>{let c=o||{rootMargin:"0px 0px 0px 0px",threshold:0};if("IntersectionObserver"in window){let s=new IntersectionObserver(a=>{a.forEach(l=>{console.log(l),l.isIntersecting&&(typeof t=="function"&&t(l.target),s.unobserve(l.target))})},c),n=document.querySelectorAll(e);n.length>0&&[...n].forEach(a=>{s.observe(a)})}},m=(e,t)=>{let o=$($(e).find("template").eq(0).html());$(e).append(o),Webflow.require("lottie").init();let c=t||"lottie-loaded";$(o).addClass(c)},g=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null,h=e=>new Promise((t,o)=>{if(document.querySelector(`link[href="${e}"]`)){t();return}fetch(e).then(s=>s.json()).then(s=>{t(s)}).catch(s=>o(new Error(`Error loading ${e}: ${s.message}`)))});var S=(e=!0)=>{let t;if(localStorage.getItem("stats")&&typeof localStorage.getItem("stats")<"u"&&g(JSON.parse(localStorage.getItem("stats")))===!0&&Date.now()-new Date(JSON.parse(localStorage.getItem("stats")).lastUpdated).getTime()<24*60*60*1e3){if(t=JSON.parse(localStorage.getItem("stats")),console.log("stats from local",t),e!==!1){w(t);return}return t}else h("https://www.jumblebee.co.uk/api/auctionStats_rpvTfjHnFNF2rbWxb1jaZCAj8GGT21Nl").then(o=>{if(t=o,console.log("stats from jumblebee",t),t.lastUpdated=Date.now(),localStorage.setItem("stats",JSON.stringify(t)),e!==!1){w(t);return}return t}).catch(o=>{console.error(o)})};S(!1);var w=e=>{console.log("animating..."),console.log(e),document.getElementById("stats-bids-made").innerHTML=Math.floor(Number(e.total_bids_made)).toLocaleString("en-US"),document.getElementById("stats-raised-to-date").innerHTML="\xA3"+Math.floor(e.total_fund_raised).toLocaleString("en-US"),document.getElementById("stats-tickets-sold").innerHTML=Math.floor(Number(e.tickets_sold)).toLocaleString("en-US"),document.querySelectorAll(".stats_value").forEach(o=>{let n=[.../(\D+)?(\d+)(\D+)?(\d+)(\D+)?(\d+)(\D+)?(\d+)?(\D+)?/.exec(o.textContent)],a=!0,l;for(n.shift(),n=n.filter(r=>r!=null);o.firstChild;)o.removeChild(o.firstChild);for(let r of n)if(isNaN(r))o.insertAdjacentHTML("beforeend",`<span>${r}</span>`);else for(let i=0;i<r.length;i++)o.insertAdjacentHTML("beforeend",`<span data-value="${r[i]}">
                <span>&ndash;</span>
                ${Array(parseInt(r[i])+1).join(0).split(0).map((f,u)=>`
                  <span>${u}</span>
                `).join("")}
              </span>`);l=[...o.querySelectorAll("span[data-value]")];let d=()=>{let{top:r}=o.getBoundingClientRect(),i=window.innerHeight*.8;setTimeout(()=>{a=!1},100),r<i&&(setTimeout(()=>{for(let f of l){let u=parseInt(f.getAttribute("data-value"))+1;f.style.transform=`translateY(-${u*100}%)`}},a?100:0),window.removeEventListener("scroll",d))};window.addEventListener("scroll",d),d()})};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{p('[s-lazy-load="lottie"]',m),p("#stats",S,{rootMargin:"0px 0px 0px 0px",threshold:0})});})();
